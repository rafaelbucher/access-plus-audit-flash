"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ModuleTranslator = void 0;
const AssertionTranslator_1 = require("./AssertionTranslator");
const TestTranslator_1 = require("./TestTranslator");
class ModuleTranslator {
    module;
    assertionTranslator;
    testTranslator;
    constructor(module, locale) {
        this.module = module;
        this.assertionTranslator = new AssertionTranslator_1.AssertionTranslator(module, locale);
        this.testTranslator = new TestTranslator_1.TestTranslator(module, locale);
    }
    translate(report) {
        const evaluationReport = report.modules[this.module];
        for (const code in evaluationReport?.assertions ?? {}) {
            const assertion = evaluationReport?.assertions[code];
            if (assertion) {
                this.translateAssertion(assertion);
            }
        }
    }
    translateAssertion(assertion) {
        this.assertionTranslator.translate(assertion);
        for (const test of assertion.results ?? []) {
            test.description = this.testTranslator.translate(assertion.code, test.resultCode);
        }
        for (const test of assertion.results ?? []) {
            if (test.verdict === assertion.metadata.outcome) {
                assertion.metadata.description = test.description;
                break;
            }
        }
    }
    translateTest(assertionCode, resultCode, values) {
        return this.testTranslator.translate(assertionCode, resultCode, values);
    }
}
exports.ModuleTranslator = ModuleTranslator;
//# sourceMappingURL=ModuleTranslator.js.map